<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°ˆæ¥­æ’çƒæŠ€è¡“çµ±è¨ˆå¹³å°</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: white;
            margin-bottom: 20px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 12px 24px;
            background: rgba(255,255,255,0.9);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .tab-btn.active {
            background: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transform: translateY(-2px);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .card h2 {
            color: #667eea;
            margin-bottom: 15px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        input, select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }

        button {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .btn-success { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }
        .btn-danger { background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%); }
        .btn-warning { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .btn-info { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th, td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #eee;
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
        }

        tr:hover {
            background: #f5f5f5;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #eee;
            align-items: center;
        }

        .stat-label {
            font-weight: bold;
            color: #555;
        }

        .stat-value {
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin: 20px 0;
        }

        .mvp-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            font-size: 1.5em;
            margin: 20px 0;
        }

        .skill-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .skill-btn {
            padding: 15px;
            font-size: 14px;
        }

        .match-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .match-item {
            background: #f8f9fa;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .delete-btn {
            background: #e74c3c;
            padding: 5px 10px;
            font-size: 12px;
        }

        @media (max-width: 768px) {
            .form-grid, .action-grid {
                grid-template-columns: 1fr;
            }
            .chart-container {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ å°ˆæ¥­æ’çƒæŠ€è¡“çµ±è¨ˆå¹³å°</h1>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('match')">æ¯”è³½è¨­å®š</button>
            <button class="tab-btn" onclick="switchTab('record')">æŠ€è¡“è¨˜éŒ„</button>
            <button class="tab-btn" onclick="switchTab('stats')">æ•¸æ“šçµ±è¨ˆ</button>
            <button class="tab-btn" onclick="switchTab('analysis')">æ•¸æ“šåˆ†æ</button>
            <button class="tab-btn" onclick="switchTab('history')">æ­·å²ç´€éŒ„</button>
        </div>

        <!-- æ¯”è³½è¨­å®š -->
        <div id="tab-match" class="tab-content active">
            <div class="card">
                <h2>æ¯”è³½è³‡è¨Šè¨­å®š</h2>
                <div class="form-grid">
                    <div class="input-group">
                        <label>æ¯”è³½æ—¥æœŸ</label>
                        <input type="date" id="matchDate">
                    </div>
                    <div class="input-group">
                        <label>æ¯”è³½åœ°é»</label>
                        <input type="text" id="matchLocation" placeholder="è¼¸å…¥æ¯”è³½åœ°é»">
                    </div>
                    <div class="input-group">
                        <label>å°æ‰‹éšŠä¼</label>
                        <input type="text" id="opponentTeam" placeholder="è¼¸å…¥å°æ‰‹éšŠå">
                    </div>
                    <div class="input-group">
                        <label>ç•¶å‰å±€æ•¸</label>
                        <select id="currentSet">
                            <option value="1">ç¬¬ä¸€å±€</option>
                            <option value="2">ç¬¬äºŒå±€</option>
                            <option value="3">ç¬¬ä¸‰å±€</option>
                            <option value="4">ç¬¬å››å±€</option>
                            <option value="5">ç¬¬äº”å±€</option>
                        </select>
                    </div>
                </div>
                <button class="btn-primary" onclick="startMatch()">é–‹å§‹æ–°æ¯”è³½</button>
            </div>

            <div class="card">
                <h2>çƒå“¡ç®¡ç†</h2>
                <div class="input-group">
                    <label>æ–°å¢çƒå“¡</label>
                    <input type="text" id="playerName" placeholder="è¼¸å…¥çƒå“¡å§“åæˆ–èƒŒè™Ÿ">
                </div>
                <button class="btn-success" onclick="addPlayer()">â• æ–°å¢çƒå“¡</button>
                
                <table>
                    <thead>
                        <tr>
                            <th>çƒå“¡</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="playerListTable"></tbody>
                </table>
            </div>
        </div>

        <!-- æŠ€è¡“è¨˜éŒ„ -->
        <div id="tab-record" class="tab-content">
            <div class="card">
                <h2>é¸æ“‡çƒå“¡</h2>
                <select id="recordPlayerSelect">
                    <option value="">-- è«‹é¸æ“‡çƒå“¡ --</option>
                </select>
            </div>

            <div class="card">
                <h2>æŠ€è¡“å‹•ä½œè¨˜éŒ„</h2>
                <div class="skill-buttons">
                    <button class="btn-success skill-btn" onclick="recordAction('serve', 'score')">ğŸ¾ ç™¼çƒå¾—åˆ†</button>
                    <button class="btn-danger skill-btn" onclick="recordAction('serve', 'error')">ğŸ¾ ç™¼çƒå¤±èª¤</button>
                    
                    <button class="btn-success skill-btn" onclick="recordAction('receive', 'score')">ğŸ“¥ æ¥ç™¼å¾—åˆ†</button>
                    <button class="btn-danger skill-btn" onclick="recordAction('receive', 'error')">ğŸ“¥ æ¥ç™¼å¤±èª¤</button>
                    
                    <button class="btn-success skill-btn" onclick="recordAction('attack', 'score')">âš¡ æ”»æ“ŠæˆåŠŸ</button>
                    <button class="btn-danger skill-btn" onclick="recordAction('attack', 'error')">âš¡ æ”»æ“Šå¤±èª¤</button>
                    
                    <button class="btn-success skill-btn" onclick="recordAction('block', 'score')">ğŸ›¡ï¸ æ””ç¶²å¾—åˆ†</button>
                    <button class="btn-danger skill-btn" onclick="recordAction('block', 'error')">ğŸ›¡ï¸ æ””ç¶²å¤±èª¤</button>
                    
                    <button class="btn-success skill-btn" onclick="recordAction('set', 'score')">ğŸ¤² èˆ‰çƒå¾—åˆ†</button>
                    <button class="btn-danger skill-btn" onclick="recordAction('set', 'error')">ğŸ¤² èˆ‰çƒå¤±èª¤</button>
                    
                    <button class="btn-success skill-btn" onclick="recordAction('defense', 'score')">ğŸ›Ÿ é˜²å®ˆæˆåŠŸ</button>
                    <button class="btn-danger skill-btn" onclick="recordAction('defense', 'error')">ğŸ›Ÿ é˜²å®ˆå¤±èª¤</button>
                </div>
            </div>
        </div>

        <!-- æ•¸æ“šçµ±è¨ˆ -->
        <div id="tab-stats" class="tab-content">
            <div class="card">
                <h2>çƒå“¡æŠ€è¡“çµ±è¨ˆ</h2>
                <div style="overflow-x: auto;">
                    <table id="statsTable">
                        <thead>
                            <tr>
                                <th>çƒå“¡</th>
                                <th>ç™¼çƒ</th>
                                <th>æ¥ç™¼</th>
                                <th>æ”»æ“Š</th>
                                <th>æ””ç¶²</th>
                                <th>èˆ‰çƒ</th>
                                <th>é˜²å®ˆ</th>
                                <th>ç¸½å¾—åˆ†</th>
                                <th>ç¸½å¤±èª¤</th>
                            </tr>
                        </thead>
                        <tbody id="statsTableBody"></tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                <h2>æˆåŠŸç‡çµ±è¨ˆ</h2>
                <div id="successRateStats"></div>
            </div>
        </div>

        <!-- æ•¸æ“šåˆ†æ -->
        <div id="tab-analysis" class="tab-content">
            <div id="mvpDisplay"></div>

            <div class="card">
                <h2>å„é …æŠ€è¡“æ’å</h2>
                <div id="rankingDisplay"></div>
            </div>

            <div class="card">
                <h2>æŠ€è¡“çµ±è¨ˆåœ–è¡¨</h2>
                <div class="chart-container">
                    <canvas id="skillChart"></canvas>
                </div>
            </div>

            <div class="card">
                <h2>æˆåŠŸç‡åœ–è¡¨</h2>
                <div class="chart-container">
                    <canvas id="rateChart"></canvas>
                </div>
            </div>
        </div>

        <!-- æ­·å²ç´€éŒ„ -->
        <div id="tab-history" class="tab-content">
            <div class="card">
                <h2>æ¯”è³½æ­·å²</h2>
                <button class="btn-danger" onclick="clearHistory()">æ¸…é™¤æ‰€æœ‰æ­·å²</button>
                <div class="match-list" id="matchHistory"></div>
            </div>
        </div>
    </div>

    <script>
        let currentMatch = null;
        let players = {};
        let matchHistory = [];

        // è¼‰å…¥æ•¸æ“š
        window.onload = function() {
            loadData();
            updateAllDisplays();
            document.getElementById('matchDate').valueAsDate = new Date();
        };

        function loadData() {
            const saved = localStorage.getItem('volleyballData');
            if (saved) {
                const data = JSON.parse(saved);
                players = data.players || {};
                matchHistory = data.matchHistory || [];
                currentMatch = data.currentMatch || null;
            }
        }

        function saveData() {
            localStorage.setItem('volleyballData', JSON.stringify({
                players: players,
                matchHistory: matchHistory,
                currentMatch: currentMatch
            }));
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(`tab-${tabName}`).classList.add('active');
            event.target.classList.add('active');

            if (tabName === 'stats') updateStatsTable();
            if (tabName === 'analysis') updateAnalysis();
            if (tabName === 'history') displayMatchHistory();
        }

        function startMatch() {
            const date = document.getElementById('matchDate').value;
            const location = document.getElementById('matchLocation').value;
            const opponent = document.getElementById('opponentTeam').value;

            if (!date || !location || !opponent) {
                alert('è«‹å¡«å¯«å®Œæ•´çš„æ¯”è³½è³‡è¨Šï¼');
                return;
            }

            currentMatch = {
                id: Date.now(),
                date: date,
                location: location,
                opponent: opponent,
                startTime: new Date().toISOString(),
                sets: {}
            };

            saveData();
            alert('æ¯”è³½å·²é–‹å§‹ï¼è«‹åˆ‡æ›åˆ°ã€ŒæŠ€è¡“è¨˜éŒ„ã€é é¢é–‹å§‹è¨˜éŒ„ã€‚');
        }

        function addPlayer() {
            const name = document.getElementById('playerName').value.trim();
            if (!name) {
                alert('è«‹è¼¸å…¥çƒå“¡å§“åï¼');
                return;
            }
            if (players[name]) {
                alert('æ­¤çƒå“¡å·²å­˜åœ¨ï¼');
                return;
            }

            players[name] = {
                serve: { score: 0, error: 0 },
                receive: { score: 0, error: 0 },
                attack: { score: 0, error: 0 },
                block: { score: 0, error: 0 },
                set: { score: 0, error: 0 },
                defense: { score: 0, error: 0 }
            };

            document.getElementById('playerName').value = '';
            saveData();
            updateAllDisplays();
            alert(`çƒå“¡ "${name}" æ–°å¢æˆåŠŸï¼`);
        }

        function deletePlayer(name) {
            if (confirm(`ç¢ºå®šè¦åˆªé™¤çƒå“¡ "${name}" å—ï¼Ÿ`)) {
                delete players[name];
                saveData();
                updateAllDisplays();
            }
        }

        function recordAction(skill, result) {
            const playerName = document.getElementById('recordPlayerSelect').value;
            if (!playerName) {
                alert('è«‹å…ˆé¸æ“‡çƒå“¡ï¼');
                return;
            }

            if (!currentMatch) {
                alert('è«‹å…ˆåœ¨ã€Œæ¯”è³½è¨­å®šã€é é¢é–‹å§‹æ–°æ¯”è³½ï¼');
                return;
            }

            players[playerName][skill][result]++;
            
            const currentSet = document.getElementById('currentSet').value;
            if (!currentMatch.sets[currentSet]) {
                currentMatch.sets[currentSet] = [];
            }
            currentMatch.sets[currentSet].push({
                player: playerName,
                skill: skill,
                result: result,
                time: new Date().toISOString()
            });

            saveData();
            updateAllDisplays();
        }

        function updateAllDisplays() {
            updatePlayerSelect();
            updatePlayerListTable();
            updateStatsTable();
        }

        function updatePlayerSelect() {
            const select = document.getElementById('recordPlayerSelect');
            const currentValue = select.value;
            select.innerHTML = '<option value="">-- è«‹é¸æ“‡çƒå“¡ --</option>';
            
            Object.keys(players).forEach(name => {
                const option = document.createElement('option');
                option.value = name;
                option.textContent = name;
                select.appendChild(option);
            });

            if (currentValue && players[currentValue]) {
                select.value = currentValue;
            }
        }

        function updatePlayerListTable() {
            const tbody = document.getElementById('playerListTable');
            tbody.innerHTML = '';

            Object.keys(players).forEach(name => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${name}</td>
                    <td><button class="delete-btn" onclick="deletePlayer('${name}')">åˆªé™¤</button></td>
                `;
            });
        }

        function updateStatsTable() {
            const tbody = document.getElementById('statsTableBody');
            tbody.innerHTML = '';

            Object.entries(players).forEach(([name, stats]) => {
                const totalScore = stats.serve.score + stats.receive.score + stats.attack.score + 
                                  stats.block.score + stats.set.score + stats.defense.score;
                const totalError = stats.serve.error + stats.receive.error + stats.attack.error + 
                                  stats.block.error + stats.set.error + stats.defense.error;

                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${name}</td>
                    <td>${stats.serve.score}/${stats.serve.error}</td>
                    <td>${stats.receive.score}/${stats.receive.error}</td>
                    <td>${stats.attack.score}/${stats.attack.error}</td>
                    <td>${stats.block.score}/${stats.block.error}</td>
                    <td>${stats.set.score}/${stats.set.error}</td>
                    <td>${stats.defense.score}/${stats.defense.error}</td>
                    <td style="color: #11998e; font-weight: bold;">${totalScore}</td>
                    <td style="color: #eb3349; font-weight: bold;">${totalError}</td>
                `;
            });

            updateSuccessRates();
        }

        function updateSuccessRates() {
            const container = document.getElementById('successRateStats');
            container.innerHTML = '';

            Object.entries(players).forEach(([name, stats]) => {
                const skills = ['serve', 'receive', 'attack', 'block', 'set', 'defense'];
                const skillNames = ['ç™¼çƒ', 'æ¥ç™¼', 'æ”»æ“Š', 'æ””ç¶²', 'èˆ‰çƒ', 'é˜²å®ˆ'];
                
                let html = `<h3>${name}</h3>`;
                skills.forEach((skill, idx) => {
                    const total = stats[skill].score + stats[skill].error;
                    const rate = total > 0 ? ((stats[skill].score / total) * 100).toFixed(1) : 0;
                    html += `
                        <div class="stat-row">
                            <span class="stat-label">${skillNames[idx]}æˆåŠŸç‡</span>
                            <span class="stat-value">${rate}%</span>
                        </div>
                    `;
                });
                container.innerHTML += `<div style="margin-bottom: 20px;">${html}</div>`;
            });
        }

        function updateAnalysis() {
            calculateMVP();
            displayRankings();
            drawCharts();
        }

        function calculateMVP() {
            let maxScore = -1;
            let mvp = null;

            Object.entries(players).forEach(([name, stats]) => {
                const totalScore = stats.serve.score + stats.receive.score + stats.attack.score + 
                                  stats.block.score + stats.set.score + stats.defense.score;
                const totalError = stats.serve.error + stats.receive.error + stats.attack.error + 
                                  stats.block.error + stats.set.error + stats.defense.error;
                const netScore = totalScore - (totalError * 0.5);

                if (netScore > maxScore) {
                    maxScore = netScore;
                    mvp = name;
                }
            });

            const mvpDisplay = document.getElementById('mvpDisplay');
            if (mvp) {
                mvpDisplay.innerHTML = `
                    <div class="mvp-card">
                        ğŸ† æœ¬å ´ MVP: ${mvp}
                        <div style="font-size: 0.6em; margin-top: 10px;">ç¶œåˆè©•åˆ†: ${maxScore.toFixed(1)}</div>
                    </div>
                `;
            } else {
                mvpDisplay.innerHTML = '<div class="card">å°šç„¡æ•¸æ“š</div>';
            }
        }

        function displayRankings() {
            const container = document.getElementById('rankingDisplay');
            const skills = ['serve', 'receive', 'attack', 'block', 'set', 'defense'];
            const skillNames = ['ç™¼çƒ', 'æ¥ç™¼', 'æ”»æ“Š', 'æ””ç¶²', 'èˆ‰çƒ', 'é˜²å®ˆ'];
            
            let html = '';
            skills.forEach((skill, idx) => {
                const ranking = Object.entries(players)
                    .map(([name, stats]) => ({
                        name: name,
                        score: stats[skill].score
                    }))
                    .sort((a, b) => b.score - a.score)
                    .slice(0, 3);

                html += `<div style="margin-bottom: 20px;">
                    <h3>${skillNames[idx]}æ’è¡Œ</h3>`;
                ranking.forEach((player, i) => {
                    html += `<div class="stat-row">
                        <span>${i + 1}. ${player.name}</span>
                        <span class="stat-value">${player.score}</span>
                    </div>`;
                });
                html += '</div>';
            });
            container.innerHTML = html;
        }

        function drawCharts() {
            drawSkillChart();
            drawRateChart();
        }

        function drawSkillChart() {
            const ctx = document.getElementById('skillChart');
            if (window.skillChart) window.skillChart.destroy();

            const playerNames = Object.keys(players);
            const skills = ['ç™¼çƒ', 'æ¥ç™¼', 'æ”»æ“Š', 'æ””ç¶²', 'èˆ‰çƒ', 'é˜²å®ˆ'];
            const skillKeys = ['serve', 'receive', 'attack', 'block', 'set', 'defense'];
            const colors = ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40'];

            const datasets = skills.map((skill, idx) => ({
                label: skill,
                data: playerNames.map(name => players[name][skillKeys[idx]].score),
                backgroundColor: colors[idx]
            }));

            window.skillChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: playerNames,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
        }

        function drawRateChart() {
            const ctx = document.getElementById('rateChart');
            if (window.rateChart) window.rateChart.destroy();

            const playerNames = Object.keys(players);
            const skillKeys = ['serve', 'receive', 'attack', 'block', 'set', 'defense'];
            
            const avgRates = playerNames.map(name => {
                let totalRate = 0;
                let count = 0;
                skillKeys.forEach(skill => {
                    const total = players[name][skill].score + players[name][skill].error;
                    if (total > 0) {
                        totalRate += (players[name][skill].score / total) * 100;
                        count++;
                    }
                });
                return count > 0 ? totalRate / count : 0;
            });

            window.rateChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: playerNames,
                    datasets: [{
                        label: 'å¹³å‡æˆåŠŸç‡ (%)',
                        data: avgRates,
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, max: 100 }
                    }
                }
            });
        }

        function displayMatchHistory() {
            const container = document.getElementById('matchHistory');
            if (matchHistory.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #999; padding: 20px;">å°šç„¡æ¯”è³½ç´€éŒ„</p>';
                return;
            }

            let html = '';
            matchHistory.forEach((match, idx) => {
                html += `
                    <div class="match-item">
                        <strong>æ¯”è³½ ${idx + 1}</strong><br>
                        æ—¥æœŸ: ${match.date}<br>
                        åœ°é»: ${match.location}<br>
                        å°æ‰‹: ${match.opponent}<br>
                        å±€æ•¸: ${Object.keys(match.sets).length} å±€
                        <button class="delete-btn" onclick="deleteMatch(${idx})" style="margin-left: 10px;">åˆªé™¤</button>
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        function deleteMatch(idx) {
            if (confirm('ç¢ºå®šè¦åˆªé™¤æ­¤æ¯”è³½ç´€éŒ„å—ï¼Ÿ')) {
                matchHistory.splice(idx, 1);
                saveData();
                displayMatchHistory();
            }
        }

        function clearHistory() {
            if (confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰æ­·å²ç´€éŒ„å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸï¼')) {
                matchHistory = [];
                players = {};
                currentMatch = null;
                saveData();
                updateAllDisplays();
                displayMatchHistory();
                alert('æ‰€æœ‰æ­·å²ç´€éŒ„å·²æ¸…é™¤ï¼');
            }
        }
    </script>
</body>
</html>